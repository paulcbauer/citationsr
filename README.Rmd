---
title: "citations"
output: html_document
---
The R package 'citations' comprises functions that can be used to analyze the 'quality' of citations.

The functions contained should help to 

1. Save data on studies whose citations we want to investigate: `study_data()`
2. Scrape a study's citations: `get_wos_citations()`
3. Scrape the fulltext (PDFs) of those citations: `gen_ris()` and `fetch_paperpiledocs()`
4. Extract text from those PDFs and save in text files: `extract_text()`
5. Clean the extracted text documents: `clean_text()`
6. Identify whether those documents really cite the study of interest: `identify_study_in_text()`
7. Delete certain sections in texts: `delete_reference_section()`
8. Extract citations cases from these documents: `extract_citation_cases()`
9. Clean the extracted citation cases: `clean_citation_cases()`
10. Classify the citation cases: future...


# Explanation

## Prerequesites

* You need to install xpdf into the folder C:\Program Files\xpdf

## Installing and loading the package

```{r, echo=T, eval=F}
install.packages("")
library(citations)
```



## Set working directory (that contains folder with the PDF documents)

```{r, echo=T, eval=F}
setwd("C:\\Users\\paul\\Desktop\\citationdata")
```


## Example: Single study

# SINGLE STUDY (20 documents)
```{r, echo=T, eval=F}
extract_text(folder = "Beck 1995", number = 20)
identify_study(study.title = "What to Do (and Not to Do) with Time-Series Cross-Section Data",
                 folder = "Beck 1995"#
                 ,  number = 20)
delete_reference_section(folder = "Beck 1995", number = 20)
delete_running_heads(folder = "Beck 1995", number = 20)
clean_text(folder = "Beck 1995", number = 20)
extract_citation_cases(folder = "Beck 1995",
                         authorname = "Beck, Katz",
                         studyyear = "1995",
                         number = 20) # scope = 2
```


# SINGLE STUDY (ALL documents)
```{r, echo=T, eval=F}
extract_text(folder = "Beck 1995")
identify_study(study.title = "What to Do (and Not to Do) with Time-Series Cross-Section Data",
                 folder = "Beck 1995"#
                 )
delete_reference_section(folder = "Beck 1995")
delete_running_heads(folder = "Beck 1995")
clean_text(folder = "Beck 1995")
extract_citation_cases(folder = "Beck 1995",
                         authorname = "Beck, Katz",
                         studyyear = "1995"
                         ) # scope = 2


  extract_text(folder = "Ermisch 2009")
  identify_study(study.title = "What to Do (and Not to Do) with Time-Series Cross-Section Data",
                 folder = "Ermisch 2009"#
  )
  delete_reference_section(folder = "Ermisch 2009")
  delete_running_heads(folder = "Ermisch 2009")
  clean_text(folder = "Ermisch 2009")
  extract_citation_cases(folder = "Ermisch 2009",
                         authorname = "Ermisch, Gambetta, Laurie, Siedler, Uhrig",
                         studyyear = "2009"
  ) # scope = 2

```


# SEVERAL STUDIES
* Info on studies should be saved in a  table
* Then we can loop over the table content
```{r, echo=T, eval=F}

publicationdata <- read.table("publicationdata.txt", sep=";",
                                header = T, stringsAsFactors = F)

  for (i in 1:nrow(publicationdata)){

    folder <- publicationdata[i,1]
    study.title <- publicationdata[i,2]
    authorname <- publicationdata[i,3]
    studyyear <- publicationdata[i,4]

    # extract_text(folder = folder)
    # identify_study(study.title = study.title, folder = folder)
    # delete_reference_section(folder = folder)
    # clean_text(folder = folder)
    extract_citation_cases(folder = folder, authorname = authorname, studyyear = studyyear)

  }
```
